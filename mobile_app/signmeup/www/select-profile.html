<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>SignMeUp</title>
		<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
		<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="css/global.css" media="screen">
		<link rel="stylesheet" type="text/css" href="css/style.css" media="screen">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
	</head>
	<body>
		<!--Page Wrapper Start-->
		<div id="wrapper"  class="qr-code">

			<!--Header Section Start-->
			<header id="header">
				<h2>Select Profile</h2>
				<a href="javascript:history.go(-1)" class="edit-btn back-btn"><img src="img/back-icon.png" alt="back" /></a>
			</header>
			<!--Header Section End-->

			<!--Content Area Start-->
			<div id="content">
				<!-- <ul class="profile-select">
					<li class="private">
						<span>&nbsp;</span>
						<a href="#">
							<strong>Private</strong>
							<em>some short description</em>
							<i>&nbsp;</i>
						</a>
					</li>
					<li class="public">
						<span>&nbsp;</span>
						<a href="#">
							<strong>Public</strong>
							<em>description about the profile above</em>
							<i>&nbsp;</i>
						</a>
					</li>
					<li class="business">
						<span>&nbsp;</span>
						<a href="#">
							<strong>Business</strong>
							<em>some short description</em>
							<i>&nbsp;</i>
						</a>
					</li>
				</ul> -->
			</div>
			<!--Content Area End-->

			<!--Footer Section Start-->
			<footer id="footer" class="bottom-btn">
				<!-- <input type="submit" value="ADD NEW PROFILE"><i class="add">&nbsp;</i></input> -->
				<a href="add-profile.html">ADD NEW PROFILE</a>
			</footer>
			<!--Footer Section End-->

		</div>
		<!--Page Wrapper End-->
		<script type="text/javascript" src="js/site.js"></script>
		<script type="text/javascript">

       // var profiles = null;		
       
       alert('tp1');
       current_user = localStorage.getItem('current_user');
       // profiles = localStorage.getItem('profiles');
       var server = 'http://192.168.4.47:3000'; //'http://signmeup.gg'
		   //$(document).ready(function() {
		  $( function () { 	
	      	$.ajax({
	      		url: server + '/api/v1/users/' + current_user + '/profiles',
	      		// data: params,
	      		method: 'GET',
	      		dataType: 'JSON',
	      		success: function(resp) {
	      			// if (resp.result == 'success') {
                var ctx =  '<ul class="profile-select">';
								for (i=0; i < resp.profiles.length; i++) {
                    ctx += 		'<li class="private"><span>&nbsp;</span><a href="#" id="profile_' + resp.profiles[i].id ;
                    ctx += ' onclick="sendProfile()"><strong>' + resp.profiles[i].profile_name + '</strong>';
                    var desc = '<em>' + '<span>Name:' + resp.profiles[i].name + '&nbsp;</span>';
                    desc +=  '<span>Surame:' + resp.profiles[i].surname + '&nbsp;</span>';
										desc += '<span>Email:' + resp.profiles[i].email + '&nbsp;</span>';
										desc += '<span>Country:' + resp.profiles[i].country_id + '&nbsp;</span>';
										desc += '<span>Date of Birth:' + resp.profiles[i].date_of_birth + '&nbsp;</span></em>';
                    ctx += desc + '</a></li>';
										ctx += '<ul class="profile-select" id="profile_'+ resp.profiles[i].id +'">';	
								}
								ctx += '</ul>';
								$('#content').append(ctx);
	      			// }
	      		}
	      		// error: function() { alert(result);}
	  			})    


		   });

       function sendProfile() {
       		var params = $('#content form').serialize();
			   	var profile_id = this.id.replace('profile_','');
		      $.ajax({
	      		url: server + '/api/v1/users/' + current_user + '/profiles/' + profile_id + '/select',
	      		data: params,
	      		method: 'POST',
	      		dataType: 'JSON',
	      		success: function(resp) {
	      			for (i=0; i < resp.profiles.length; i++) {
		      			var eml=document.getElementById(resp.profiles[i].id)[0].value;
		      			var eml=document.getElementsByName(resp.profiles[i].profile_name)[0].value;
		      			var eml=document.getElementsByName(resp.profiles[i].surname)[0].value;
		      			var eml=document.getElementsByName(resp.profiles[i].email)[0].value;
		      			var eml=document.getElementsByName(rresp.profiles[i].country_id)[0].value;
		      			var eml=document.getElementsByName(resp.profiles[i].date_of_birth)[0].value;
		      			alert('params are submited');
		      		}	
	      		}
				  })
		    }
			
		</script>
		
	</body>
</html>